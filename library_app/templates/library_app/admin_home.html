{% extends 'library_app/base_admin.html' %}
{% block content %}

<!-- ================= DASHBOARD STYLES ================= -->
<style>
.dashboard-title {
    font-size: 28px;
    color: #7b3f3f;
    margin-bottom: 5px;
}

.dashboard-subtitle {
    color: #999;
    margin-bottom: 30px;
}

/* KPI cards */
.cards {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
    gap: 25px;
    margin-bottom: 40px;
}

.card {
    background: #fff;
    border-radius: 14px;
    padding: 30px;
    text-align: center;
    box-shadow: 0 15px 35px rgba(0,0,0,0.08);
}

.card h2 {
    font-size: 14px;
    letter-spacing: 1px;
    color: #666;
    margin-bottom: 10px;
    text-transform: uppercase;
}

.card p {
    font-size: 32px;
    font-weight: bold;
    color: #7b3f3f;
}

/* Charts */
.charts {
    display: grid;
    grid-template-columns: 2fr 1fr;
    gap: 25px;
    margin-bottom: 30px;
}

.chart-card {
    background: #fff;
    border-radius: 16px;
    padding: 25px;
    box-shadow: 0 15px 35px rgba(0,0,0,0.08);
}

.chart-card h3 {
    margin-bottom: 20px;
    font-size: 16px;
    color: #555;
}

.chart-card.full {
    margin-top: 20px;
}
</style>

<!-- ================= DASHBOARD CONTENT ================= -->

<h1 class="dashboard-title">Admin Dashboard</h1>
<p class="dashboard-subtitle">Overview of your library performance</p>

<!-- KPI CARDS -->
<div class="cards">
    <div class="card">
        <h2>Total Books</h2>
        <p>{{ total_books }}</p>
    </div>

    <div class="card">
        <h2>Total Orders</h2>
        <p>{{ total_orders }}</p>
    </div>

    <div class="card">
        <h2>Total Users</h2>
        <p>{{ total_users }}</p>
    </div>

    <div class="card">
        <h2>Pending Reviews</h2>
        <p>{{ pending_reviews }}</p>
    </div>
</div>

<!-- CHARTS -->
<div class="charts">
    <div class="chart-card">
        <h3>Most Borrowed Books</h3>
        <canvas id="borrowedChart"></canvas>
    </div>

    <div class="chart-card">
        <h3>Books by Category</h3>
        <canvas id="categoryChart"></canvas>
    </div>
</div>

<div class="chart-card full">
    <h3>User Activity Trends</h3>
    <canvas id="activityChart"></canvas>
</div>

<!-- ================= SCRIPTS ================= -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<script>
/* Most Borrowed Books */
new Chart(document.getElementById('borrowedChart'), {
    type: 'bar',
    data: {
        labels: [
            'To Kill a Mockingbird',
            'Pride and Prejudice',
            '1984',
            'Brave New World',
            'The Great Gatsby'
        ],
        datasets: [{
            data: [95, 80, 70, 60, 50],
            backgroundColor: '#6b8e95'
        }]
    },
    options: {
        plugins: { legend: { display: false } },
        scales: {
            y: { beginAtZero: true }
        }
    }
});

/* Books by Category */
new Chart(document.getElementById('categoryChart'), {
    type: 'doughnut',
    data: {
        labels: ['Classic', 'Dystopian', 'Romance', 'Coming of Age'],
        datasets: [{
            data: [33, 33, 17, 17],
            backgroundColor: [
                '#6b8e95',
                '#c2a383',
                '#8b4a4a',
                '#999'
            ]
        }]
    }
});

/* User Activity Trends */
new Chart(document.getElementById('activityChart'), {
    type: 'line',
    data: {
        labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
        datasets: [{
            data: [45, 52, 60, 58, 72, 85],
            borderColor: '#6b8e95',
            tension: 0.4,
            fill: false
        }]
    }
});
</script>

{% endblock %}
